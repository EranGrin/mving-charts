<!DOCTYPE html>
<html lang="de">


<head>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    html,
    body {
      margin: 0;
      padding: 0;
    }

    #graph {
      vertical-align: top;
    }
  </style>
</head>

<body>
  <div id="graph"></div>

  <script>
    // fetch the CSV tables and regroup the columns of data
    console.log(Plotly.d3.csv('./product-bar.csv'))
    
    Plotly.d3.csv('./product-bar.csv', function(err, rows){

  function unpack(rows, key) {
  return rows.map(function(row) { return row[key]; });
}

unpack(rows, )


var trace1 = {
        name: 'Sells',
        type: 'bar',
   
        y: unpack(rows, 'costs')
      };

 var trace2 = {
        name: 'Costs',
        type: 'bar',
        X: [2010, 2011, 2012, 2013, 2014, 2015],
        y: unpack(rows, 'sells'),
        
      };


var data = [trace1, trace2];

var layout =  { //configuration
        sliders: [{
          pad: {
            t: 20
          },
          x: 0.05,
          len: 0.95,
          currentvalue: {
            xanchor: 'right',
            prefix: 'Year: ',
            font: {
              color: '#888',
              size: 30
            }
          },
          transition: {
            duration: 500
          },

          // By default, animate commands are bound to the most recently animated frame:

          /////////
          steps: [  ///steps - frames containeres
            {
            label: unpack(rows, 'year'), /// label of the changing frame at the momment color but should be year 
            method: 'animate',
            args: [
              ['frame1'], {
                mode: 'immediate',
                frame: {
                  redraw: false,
                  duration: 500
                },
                transition: {
                  duration: 500
                }
              }
            ]
          }
         
          , {
            label: '2005',
            method: 'animate',
            args: [
              ['frame2'], {
                mode: 'immediate',
                frame: {
                  redraw: false,
                  duration: 500
                },
                transition: {
                  duration: 500
                }
              }
            ]
          }
          
          
          , {
            label: '2010',
            method: 'animate',
            args: [
              ['frame3'], {
                mode: 'immediate',
                frame: {
                  redraw: false,
                  duration: 500
                },
                transition: {
                  duration: 500
                }
              }
            ]
          }]
        }],

///////////////---  Control Bar ---////////////
        updatemenus: [{
          type: 'buttons',
          showactive: false,
          x: 0.05,
          y: 0,
          xanchor: 'right',
          yanchor: 'top',
          direction: 'left',
          pad: {
            t: 60,
            r: 20
          },

          buttons: [{
            label: 'Play',
            method: 'animate',
            args: [null, {
              fromcurrent: true,
              frame: {
                redraw: false,
                duration: 1000
              },
              transition: {
                duration: 500
              }
            }]
          }, {
            label: 'Pause',
            method: 'animate',
            args: [
              [null], {
                mode: 'immediate',
                frame: {
                  redraw: false,
                  duration: 0
                }
              }
            ]
          }]
        }]
      }


Plotly.newPlot('graph', data, layout);
})


  </script>
</body>


</html>













